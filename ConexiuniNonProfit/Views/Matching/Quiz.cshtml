@model List<QuizQuestion>

<style>
    .quiz-container {
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
    }

    .question-slide {
        display: none;
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        text-align: center;
    }

        .question-slide.active {
            display: block;
            animation: fadeIn 0.5s;
        }

    .question {
        font-size: 24px;
        color: #333;
        margin-bottom: 30px;
    }

    .options-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 30px;
    }

    .option-button {
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 15px;
        padding: 20px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

        .option-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-color: #2196F3;
        }

        .option-button.selected {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }

    .navigation {
        margin-top: 30px;
        display: flex;
        justify-content: center;
        gap: 20px;
    }

    .nav-button {
        background: #2196F3;
        color: white;
        border: none;
        padding: 10px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s ease;
    }

        .nav-button:hover {
            background: #1976D2;
        }

    .progress-bar {
        height: 4px;
        background: #e0e0e0;
        margin-bottom: 30px;
        border-radius: 2px;
    }

    .progress {
        height: 100%;
        background: #2196F3;
        border-radius: 2px;
        transition: width 0.3s ease;
    }

    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<div class="quiz-container">
    <div class="progress-bar">
        <div class="progress" id="progress"></div>
    </div>

    <form id="quizForm" method="post" asp-action="CalculateMatch">
        @for (int i = 0; i < Model.Count; i++)
        {
            <div class="question-slide" id="slide-@i">
                <div class="question">@Model[i].Question</div>
                <div class="options-container">
                    @foreach (var option in Model[i].Options)
                    {
                        <button type="button" class="option-button"
                                onclick="selectOption(this, '@i', '@option')">
                            @option
                        </button>
                    }
                </div>
                <input type="hidden" name="answers[@i]" id="answer-@i" />
            </div>
        }

        <div class="navigation">
            <button type="button" class="nav-button" id="prevBtn" onclick="prevSlide()" style="display:none">Înapoi</button>
            <button type="button" class="nav-button" id="nextBtn" onclick="nextSlide()">Următoarea</button>
            <button type="submit" class="nav-button" id="submitBtn" style="display:none">Vezi Rezultatele</button>
        </div>
    </form>
</div>

<script>
    let currentSlide = 0;
    const totalSlides = @Model.Count;

    function showSlide(n) {
        const slides = document.getElementsByClassName("question-slide");
        const progress = document.getElementById("progress");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const submitBtn = document.getElementById("submitBtn");

        // Ascunde toate slide-urile
        for (let i = 0; i < slides.length; i++) {
            slides[i].classList.remove("active");
        }

        // Arată slide-ul curent
        slides[n].classList.add("active");

        // Actualizează progress bar
        progress.style.width = ((n + 1) / totalSlides * 100) + "%";

        // Gestionează butoanele de navigare
        prevBtn.style.display = n === 0 ? "none" : "block";
        if (n === totalSlides - 1) {
            nextBtn.style.display = "none";
            submitBtn.style.display = "block";
        } else {
            nextBtn.style.display = "block";
            submitBtn.style.display = "none";
        }
    }

    function selectOption(button, questionIndex, value) {
        // Deselectează toate opțiunile pentru această întrebare
        const options = button.parentElement.getElementsByClassName("option-button");
        for (let option of options) {
            option.classList.remove("selected");
        }

        // Selectează opțiunea curentă
        button.classList.add("selected");
        document.getElementById(`answer-${questionIndex}`).value = value;
    }

    function nextSlide() {
        if (currentSlide < totalSlides - 1) {
            currentSlide++;
            showSlide(currentSlide);
        }
    }

    function prevSlide() {
        if (currentSlide > 0) {
            currentSlide--;
            showSlide(currentSlide);
        }
    }

    // Inițializare
    showSlide(0);
</script>